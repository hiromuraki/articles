# Docker 基本概念

## 1. 镜像（Image）

镜像是 Docker 的构建基石，是一个只读的模板，用于创建容器。镜像包含了运行应用程序所需的所有内容：代码、运行时环境、系统工具、系统库和设置。

**主要特性：**

- 分层结构：镜像由多个只读层组成，每一层代表 Dockerfile 中的一个指令
- 不可变性：一旦创建，镜像内容不可更改
- 可共享：可以通过 Docker Hub 等注册表共享和分发
- 版本控制：支持标签管理，便于版本追踪

## 2. 容器（Container）

容器是镜像的运行实例，是一个独立、轻量级的可执行软件包。容器在镜像层之上添加了一个可写层，使应用程序能够在隔离的环境中运行。

**主要特性：**

- 轻量级：共享主机系统内核，启动快速
- 可移植性：在任何支持 Docker 的环境中一致运行
- 隔离性：进程、网络、文件系统与主机和其他容器隔离
- 临时性：默认情况下容器停止后，可写层的数据会丢失

## 3. 容器资源

### 3.1. 卷（Volume）

卷是 Docker 容器中持久化数据的首选机制。卷完全由 Docker 管理，独立于容器的生命周期。

**命名挂载**

- Docker 管理的持久化存储
- 通过`docker volume create`命令创建或首次使用时自动创建
- 存储在 Docker 主机上的特定目录中（Linux 上通常是`/var/lib/docker/volumes/`）
- 可以通过名称引用，便于多个容器共享

**绑定挂载**

- 将主机文件系统中的目录或文件直接挂载到容器中
- 可以挂载到任何位置，包括系统文件
- 性能更好，但依赖于主机的目录结构
- 适合开发环境，便于代码实时同步

### 3.2. 网络（Network）

Docker 网络允许容器之间、容器与外部世界的通信。Docker 提供了多种网络驱动程序来满足不同场景的需求。

**网络类型：**

- **桥接网络（bridge）**：默认网络类型，容器通过虚拟网桥连接
- **主机网络（host）**：容器直接使用主机网络栈，无网络隔离
- **覆盖网络（overlay）**：用于多个 Docker 守护进程之间的通信（Swarm 集群）
- **MACVLAN 网络**：为容器分配 MAC 地址，使其在物理网络中显示为物理设备
- **无网络（none）**：容器没有网络接口

**主要功能：**

- 容器发现和 DNS 解析
- 端口映射和暴露
- 网络安全隔离
- 多容器应用通信
