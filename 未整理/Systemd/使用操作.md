### 常用操作

重新加载配置文件

```bash
systemctl daemon-reload
```

启动服务

```bash
systemctl start service
```

停止服务

```bash
systemctl stop service
```

重启服务

```bash
systemctl restart service
```

其他

```bash
# 杀死一个服务的所有子进程
sudo systemctl kill service

# 重新加载一个服务的配置文件
sudo systemctl reload service

# 显示某个 Unit 的所有底层参数
systemctl show service

# 显示某个 Unit 的指定属性的值
systemctl show -p CPUShares service

# 设置某个 Unit 的指定属性
sudo systemctl set-property service CPUShares=500
```

注：使用 --user 以启用用户级的 systemd

### 示例

#### 创建一个用户级的 frp 服务端 Systemd 服务

frpc 程序路径: ~/local/app/frp/frpc
frpc 配置文件路径: ~/local/config/frp/frpc.toml

(1) 创建用户级 systemd 配置目录

```bash
mkdir -p ~/.config/systemd/user/
```

(2) 创建客户端的 frpc.service

`~/.config/systemd/user/frpc.service`

```ini
[Unit]
Description=FRP Server
After=network.target

[Service]
Type=simple
WorkingDirectory=%h/local/app/frp
ExecStart=%h/local/app/frp/frps --config %h/local/config/frp/frps.toml
Restart=on-failure
RestartSec=5s

[Install]
WantedBy=default.target
```

(3) 启动

重载配置并启动 frpc 服务

```bash
systemctl --user daemon-reload
systemctl --user restart frpc
```

启用开机自启

```bash
systemctl --user enable frpc
```

查看状态

```bash
systemctl --user status frpc
```
